{
  "className":"swingtree.Icon_Spec",
  "title":"Displaying Icons",
  "narrative":"For displaying icons in you UI declarations,\n    SwingTree offers a dedicated component called ´JIcon´,\n    an alternative to the standard `JLabel` component,\n    commonly used for displaying icons.\n\n    The `JIcon` component extends `JLabel` and\n    is more deliberate in its handling of icons.\n\n    In this specification, we will explore how\n    you can create declarative UIs\n    with the `JIcon` component.",
  "subjects":["swingtree.components.JIcon","swingtree.UIForIcon","swingtree.UI"],
  "statistics":{
    "runs":"34",
    "successRate":"100.0%",
    "failures":"0",
    "errors":"0",
    "skipped":"0",
    "duration":"?"
  },
  "headers":[],"tags":{},"see":[],
  "features":[ 
    {
      "id":"Create a icon UI declaration from a path not leading to an existing image.",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            An important requirement of GUI code is to\n            not cause exceptions when the image file is not found.\n            This is important to avoid the rest of the GUI from breaking\n            and not being responsive to the user or even showing up.\n\n            So here we check if we can create a UI declaration\n            for the `JIcon` component with an image path that does \n            not lead to an existing image file.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"We create a UI declaration for an icon at a given path.","code":["var ui = UI.icon(\"path/to/my/icon.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be empty.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a icon UI declaration from a non existing image path with a size.",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            An important requirement of GUI code is to\n            not cause exceptions when the image file is not found.\n            This is important to avoid the rest of the GUI from breaking\n            and not being responsive to the user or even showing up.\n\n            So here we check if we can create a UI declaration\n            for the `JIcon` component with an image path that does \n            not lead to an existing image file.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"We create a UI declaration for an icon at a given path with a size.","code":["var ui = UI.icon(Size.of(32, 32), \"path/to/my/icon.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be empty.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a icon UI declaration from an existing image source.",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":[]
      },
      "blocks":[
        {"kind":"given","text":"We create a UI declaration for an icon at a given path.","code":["var ui = UI.icon(\"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() > 0","component.icon.getIconHeight() > 0"]}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a icon UI declaration from an existing image path with a size. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":[]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a UI declaration for an icon at a given path with a size.","code":["var ui = UI.icon(Size.of(32, 32), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a icon UI declaration from an existing image path with a size. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":[]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a UI declaration for an icon at a given path with a size.","code":["var ui = UI.icon(Size.of(32, 32), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a icon UI declaration from an existing image path with a size. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":[]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a UI declaration for an icon at a given path with a size.","code":["var ui = UI.icon(Size.of(32, 32), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Build an icon UI declaration from the `IconDeclaration` type. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            the `IconDeclaration` type is a value oriented interface\n            which is designed to be used to implement constants \n            pointing to icon resources.\n\n            This allows you to specify icons with custom sizes\n            in your UI and business logic, without having to\n            deal with IO loading complexities.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"","code":["var icon = IconDeclaration.of(Size.of(32, 42), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI declaration from the icon declaration.","code":["var ui = UI.icon(icon)"]},

        {"kind":"then","text":"The UI declaration should be created.","code":["ui != null"]},

        {"kind":"and","text":"The icon should be loaded.","code":["var component = ui.get(JIcon)","component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(42 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Build an icon UI declaration from the `IconDeclaration` type. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            the `IconDeclaration` type is a value oriented interface\n            which is designed to be used to implement constants \n            pointing to icon resources.\n\n            This allows you to specify icons with custom sizes\n            in your UI and business logic, without having to\n            deal with IO loading complexities.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"","code":["var icon = IconDeclaration.of(Size.of(32, 42), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI declaration from the icon declaration.","code":["var ui = UI.icon(icon)"]},

        {"kind":"then","text":"The UI declaration should be created.","code":["ui != null"]},

        {"kind":"and","text":"The icon should be loaded.","code":["var component = ui.get(JIcon)","component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(42 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Build an icon UI declaration from the `IconDeclaration` type. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            the `IconDeclaration` type is a value oriented interface\n            which is designed to be used to implement constants \n            pointing to icon resources.\n\n            This allows you to specify icons with custom sizes\n            in your UI and business logic, without having to\n            deal with IO loading complexities.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"","code":["var icon = IconDeclaration.of(Size.of(32, 42), \"img/swing.png\")"]},

        {"kind":"when","text":"We create a UI declaration from the icon declaration.","code":["var ui = UI.icon(icon)"]},

        {"kind":"then","text":"The UI declaration should be created.","code":["ui != null"]},

        {"kind":"and","text":"The icon should be loaded.","code":["var component = ui.get(JIcon)","component.icon.getIconWidth() == (int) Math.round(32 * uiScale)","component.icon.getIconHeight() == (int) Math.round(42 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a `JIcon` dynamically bound to a `Var<IconDeclaration> property. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `Var` type is a reactive type that allows you to\n            bind UI components to a value that can change over time.\n\n            This is useful for creating dynamic UIs that respond to\n            changes in the application state and are also decoupled\n            from the business logic.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a `Var` property with an icon declaration.","code":["var icon = Var.of(IconDeclaration.of(Size.of(16, 16), \"img/swing.png\"))"]},

        {"kind":"and","text":"We create a UI declaration for the icon property.","code":["var ui = UI.icon(icon)"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(16 * uiScale)","component.icon.getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"when","text":"We update the icon property.","code":["icon.set(IconDeclaration.of(Size.of(28, 32), \"img/swing.png\"))"]},

        {"kind":"then","text":"The icon should be updated.","code":["component.icon.getIconWidth() == (int) Math.round(28 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a `JIcon` dynamically bound to a `Var<IconDeclaration> property. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `Var` type is a reactive type that allows you to\n            bind UI components to a value that can change over time.\n\n            This is useful for creating dynamic UIs that respond to\n            changes in the application state and are also decoupled\n            from the business logic.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a `Var` property with an icon declaration.","code":["var icon = Var.of(IconDeclaration.of(Size.of(16, 16), \"img/swing.png\"))"]},

        {"kind":"and","text":"We create a UI declaration for the icon property.","code":["var ui = UI.icon(icon)"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(16 * uiScale)","component.icon.getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"when","text":"We update the icon property.","code":["icon.set(IconDeclaration.of(Size.of(28, 32), \"img/swing.png\"))"]},

        {"kind":"then","text":"The icon should be updated.","code":["component.icon.getIconWidth() == (int) Math.round(28 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create a `JIcon` dynamically bound to a `Var<IconDeclaration> property. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `Var` type is a reactive type that allows you to\n            bind UI components to a value that can change over time.\n\n            This is useful for creating dynamic UIs that respond to\n            changes in the application state and are also decoupled\n            from the business logic.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"We create a `Var` property with an icon declaration.","code":["var icon = Var.of(IconDeclaration.of(Size.of(16, 16), \"img/swing.png\"))"]},

        {"kind":"and","text":"We create a UI declaration for the icon property.","code":["var ui = UI.icon(icon)"]},

        {"kind":"when","text":"We create a UI component from the declaration.","code":["var component = ui.get(JIcon)"]},

        {"kind":"then","text":"The component should be an instance of JIcon.","code":["(component instanceof JIcon)"]},

        {"kind":"and","text":"The icon should be loaded.","code":["component.icon.getIconWidth() == (int) Math.round(16 * uiScale)","component.icon.getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"when","text":"We update the icon property.","code":["icon.set(IconDeclaration.of(Size.of(28, 32), \"img/swing.png\"))"]},

        {"kind":"then","text":"The icon should be updated.","code":["component.icon.getIconWidth() == (int) Math.round(28 * uiScale)","component.icon.getIconHeight() == (int) Math.round(32 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"The `UI.findIcon(IconDeclaration)` method will load an icon with the correct size and scale. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `UI.findIcon(IconDeclaration)` method is a utility method\n            that allows you to load an icon with the correct size and scale\n            from an `IconDeclaration` constant.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Five different kinds of icon declarations.","code":["var iconDeclaration1 = IconDeclaration.of(\"img/trees.png\")","var iconDeclaration2 = IconDeclaration.of(Size.unknown(), \"img/trees.png\")","var iconDeclaration3 = IconDeclaration.of(Size.of(-1, 12), \"img/trees.png\")","var iconDeclaration4 = IconDeclaration.of(Size.of(16, -1), \"img/trees.png\")","var iconDeclaration5 = IconDeclaration.of(Size.of(16, 12), \"img/trees.png\")"]},

        {"kind":"when","text":"We try to find the icons.","code":["var icon1 = UI.findIcon(iconDeclaration1)","var icon2 = UI.findIcon(iconDeclaration2)","var icon3 = UI.findIcon(iconDeclaration3)","var icon4 = UI.findIcon(iconDeclaration4)","var icon5 = UI.findIcon(iconDeclaration5)"]},

        {"kind":"then","text":"They are all present:","code":["icon1.isPresent() && icon2.isPresent() && icon3.isPresent() && icon4.isPresent() && icon5.isPresent()"]},

        {"kind":"and","text":"\n            The first icon should have the size from the image file scaled by the UI scale factor.\n            The second icon should be the exact same, it should also have the size from the image \n            file scaled by the UI scale factor. \n        ","code":["icon1.get() === icon2.get()","icon1.get().getIconWidth() == (int) Math.round(512 * uiScale)","icon1.get().getIconHeight() == (int) Math.round(512 * uiScale)"]},

        {"kind":"and","text":"    \n            The third icon should have the width scaled by the UI scale factor and the height \n            calculated from the aspect ratio of the image.\n            And the same goes for the fourth icon, but with the width calculated from the aspect ratio.\n\n            Note that the aspect ratio is 1:1 for this image.\n        ","code":["icon3.get().getIconWidth() == (int) Math.round(12 * uiScale)","icon3.get().getIconHeight() == (int) Math.round(12 * uiScale)","icon4.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon4.get().getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"and","text":"       \n            Finally, the fifth icon should have the specified size scaled by the UI scale factor.\n            The actual size of the icon should be ignored.\n        ","code":["icon5.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon5.get().getIconHeight() == (int) Math.round(12 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"The `UI.findIcon(IconDeclaration)` method will load an icon with the correct size and scale. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `UI.findIcon(IconDeclaration)` method is a utility method\n            that allows you to load an icon with the correct size and scale\n            from an `IconDeclaration` constant.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Five different kinds of icon declarations.","code":["var iconDeclaration1 = IconDeclaration.of(\"img/trees.png\")","var iconDeclaration2 = IconDeclaration.of(Size.unknown(), \"img/trees.png\")","var iconDeclaration3 = IconDeclaration.of(Size.of(-1, 12), \"img/trees.png\")","var iconDeclaration4 = IconDeclaration.of(Size.of(16, -1), \"img/trees.png\")","var iconDeclaration5 = IconDeclaration.of(Size.of(16, 12), \"img/trees.png\")"]},

        {"kind":"when","text":"We try to find the icons.","code":["var icon1 = UI.findIcon(iconDeclaration1)","var icon2 = UI.findIcon(iconDeclaration2)","var icon3 = UI.findIcon(iconDeclaration3)","var icon4 = UI.findIcon(iconDeclaration4)","var icon5 = UI.findIcon(iconDeclaration5)"]},

        {"kind":"then","text":"They are all present:","code":["icon1.isPresent() && icon2.isPresent() && icon3.isPresent() && icon4.isPresent() && icon5.isPresent()"]},

        {"kind":"and","text":"\n            The first icon should have the size from the image file scaled by the UI scale factor.\n            The second icon should be the exact same, it should also have the size from the image \n            file scaled by the UI scale factor. \n        ","code":["icon1.get() === icon2.get()","icon1.get().getIconWidth() == (int) Math.round(512 * uiScale)","icon1.get().getIconHeight() == (int) Math.round(512 * uiScale)"]},

        {"kind":"and","text":"    \n            The third icon should have the width scaled by the UI scale factor and the height \n            calculated from the aspect ratio of the image.\n            And the same goes for the fourth icon, but with the width calculated from the aspect ratio.\n\n            Note that the aspect ratio is 1:1 for this image.\n        ","code":["icon3.get().getIconWidth() == (int) Math.round(12 * uiScale)","icon3.get().getIconHeight() == (int) Math.round(12 * uiScale)","icon4.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon4.get().getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"and","text":"       \n            Finally, the fifth icon should have the specified size scaled by the UI scale factor.\n            The actual size of the icon should be ignored.\n        ","code":["icon5.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon5.get().getIconHeight() == (int) Math.round(12 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"The `UI.findIcon(IconDeclaration)` method will load an icon with the correct size and scale. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            The `UI.findIcon(IconDeclaration)` method is a utility method\n            that allows you to load an icon with the correct size and scale\n            from an `IconDeclaration` constant.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Five different kinds of icon declarations.","code":["var iconDeclaration1 = IconDeclaration.of(\"img/trees.png\")","var iconDeclaration2 = IconDeclaration.of(Size.unknown(), \"img/trees.png\")","var iconDeclaration3 = IconDeclaration.of(Size.of(-1, 12), \"img/trees.png\")","var iconDeclaration4 = IconDeclaration.of(Size.of(16, -1), \"img/trees.png\")","var iconDeclaration5 = IconDeclaration.of(Size.of(16, 12), \"img/trees.png\")"]},

        {"kind":"when","text":"We try to find the icons.","code":["var icon1 = UI.findIcon(iconDeclaration1)","var icon2 = UI.findIcon(iconDeclaration2)","var icon3 = UI.findIcon(iconDeclaration3)","var icon4 = UI.findIcon(iconDeclaration4)","var icon5 = UI.findIcon(iconDeclaration5)"]},

        {"kind":"then","text":"They are all present:","code":["icon1.isPresent() && icon2.isPresent() && icon3.isPresent() && icon4.isPresent() && icon5.isPresent()"]},

        {"kind":"and","text":"\n            The first icon should have the size from the image file scaled by the UI scale factor.\n            The second icon should be the exact same, it should also have the size from the image \n            file scaled by the UI scale factor. \n        ","code":["icon1.get() === icon2.get()","icon1.get().getIconWidth() == (int) Math.round(512 * uiScale)","icon1.get().getIconHeight() == (int) Math.round(512 * uiScale)"]},

        {"kind":"and","text":"    \n            The third icon should have the width scaled by the UI scale factor and the height \n            calculated from the aspect ratio of the image.\n            And the same goes for the fourth icon, but with the width calculated from the aspect ratio.\n\n            Note that the aspect ratio is 1:1 for this image.\n        ","code":["icon3.get().getIconWidth() == (int) Math.round(12 * uiScale)","icon3.get().getIconHeight() == (int) Math.round(12 * uiScale)","icon4.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon4.get().getIconHeight() == (int) Math.round(16 * uiScale)"]},

        {"kind":"and","text":"       \n            Finally, the fifth icon should have the specified size scaled by the UI scale factor.\n            The actual size of the icon should be ignored.\n        ","code":["icon5.get().getIconWidth() == (int) Math.round(16 * uiScale)","icon5.get().getIconHeight() == (int) Math.round(12 * uiScale)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1f","1.5f","2f"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An already loaded icon will dynamically scale to mach the current DPI scale factor.",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            When an icon is loaded, it is loaded at the current DPI scale factor.\n            If the DPI scale factor changes after it was already loaded, \n            then the icon will internally reload itself to match the new DPI scale factor.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"We start with an initial scale of 1.","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(1f) )"]},

        {"kind":"and","text":"We load two different types of images, an SVG and a PNG image.","code":["var icon1 = UI.findIcon(IconDeclaration.of(\"img/trees.png\").withSize(128, 512))","var icon2 = UI.findIcon(IconDeclaration.of(\"img/dandelion.svg\").withSize(128, 512))"]},

        {"kind":"expect","text":"The icons should have been loaded.","code":["icon1.isPresent() && icon2.isPresent()"]},

        {"kind":"and","text":"The icons should have the correct size.","code":["icon1.get().getIconWidth() == 128","icon1.get().getIconHeight() == 512","icon2.get().getIconWidth() == 128","icon2.get().getIconHeight() == 512"]},

        {"kind":"when","text":"We change the scale to 2.","code":["SwingTree.get().setUiScaleFactor(2f)"]},

        {"kind":"then","text":"The icons should have been reloaded.","code":["icon1.get().getIconWidth() == 256","icon1.get().getIconHeight() == 1024","icon2.get().getIconWidth() == 256","icon2.get().getIconHeight() == 1024"]},

        {"kind":"when","text":"We change the scale to 1.5.","code":["SwingTree.get().setUiScaleFactor(1.5f)"]},

        {"kind":"then","text":"The icons should have been reloaded.","code":["icon1.get().getIconWidth() == 192","icon1.get().getIconHeight() == 768","icon2.get().getIconWidth() == 192","icon2.get().getIconHeight() == 768"]}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An SVG created from a String source has the correct dimensions. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons created from a source string-based `IconDeclaration` have \n            the dimensions found in the string. \n            This is particularly useful for creating consistent\n            icon sizes across your application.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"An icon declaration created from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(\"\"\"","                    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\">","                        <circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/>","                    </svg>","                \"\"\")"]},

        {"kind":"when","text":"We create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not report any size, since they are loaded as being \"scalable\".","code":["component.icon.getIconWidth() ==  -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create a raw SVG icon declaration based component:","code":["iconDecl = IconDeclaration.ofSvg(iconDecl.source())","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create another UI declaration directly from an `SvgIcon`:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An SVG created from a String source has the correct dimensions. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons created from a source string-based `IconDeclaration` have \n            the dimensions found in the string. \n            This is particularly useful for creating consistent\n            icon sizes across your application.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"An icon declaration created from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(\"\"\"","                    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\">","                        <circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/>","                    </svg>","                \"\"\")"]},

        {"kind":"when","text":"We create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not report any size, since they are loaded as being \"scalable\".","code":["component.icon.getIconWidth() ==  -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create a raw SVG icon declaration based component:","code":["iconDecl = IconDeclaration.ofSvg(iconDecl.source())","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create another UI declaration directly from an `SvgIcon`:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An SVG created from a String source has the correct dimensions. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons created from a source string-based `IconDeclaration` have \n            the dimensions found in the string. \n            This is particularly useful for creating consistent\n            icon sizes across your application.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"An icon declaration created from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(\"\"\"","                    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\">","                        <circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/>","                    </svg>","                \"\"\")"]},

        {"kind":"when","text":"We create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not report any size, since they are loaded as being \"scalable\".","code":["component.icon.getIconWidth() ==  -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create a raw SVG icon declaration based component:","code":["iconDecl = IconDeclaration.ofSvg(iconDecl.source())","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create another UI declaration directly from an `SvgIcon`:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An SVG created from a String source has the correct dimensions. [3]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons created from a source string-based `IconDeclaration` have \n            the dimensions found in the string. \n            This is particularly useful for creating consistent\n            icon sizes across your application.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"An icon declaration created from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(\"\"\"","                    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\">","                        <circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/>","                    </svg>","                \"\"\")"]},

        {"kind":"when","text":"We create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not report any size, since they are loaded as being \"scalable\".","code":["component.icon.getIconWidth() ==  -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create a raw SVG icon declaration based component:","code":["iconDecl = IconDeclaration.ofSvg(iconDecl.source())","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create another UI declaration directly from an `SvgIcon`:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"An SVG created from a String source has the correct dimensions. [4]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons created from a source string-based `IconDeclaration` have \n            the dimensions found in the string. \n            This is particularly useful for creating consistent\n            icon sizes across your application.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"An icon declaration created from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(\"\"\"","                    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\">","                        <circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/>","                    </svg>","                \"\"\")"]},

        {"kind":"when","text":"We create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not report any size, since they are loaded as being \"scalable\".","code":["component.icon.getIconWidth() ==  -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create a raw SVG icon declaration based component:","code":["iconDecl = IconDeclaration.ofSvg(iconDecl.source())","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We create another UI declaration directly from an `SvgIcon`:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() ==  (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should also be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create an icon UI declaration from an SVG string source. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can be created programmatically using XML strings.\n            This allows for dynamic icon generation without external files.\n\n            When using `IconDeclaration.ofSvg(String)`, the SVG content is parsed\n            and rendered as a vector icon that scales crisply at any resolution.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"Create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not have the specified size, since they are loaded as having a context dependent size.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"and","text":"The source format should be SVG_STRING.","code":["iconDecl.sourceFormat() == IconDeclaration.SourceFormat.SVG_STRING"]},

        {"kind":"when","text":"Now use the `IconDeclaration.ofSvg` method to create a raw SVG:","code":["iconDecl = IconDeclaration.ofSvg(svg)","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Create a UI declaration with a custom `SvgIcon` from the same source:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"],"svg":["'''<svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/></svg>'''","'''<svg width=\"24\" height=\"24\" viewBox=\"0 0 100 100\"><rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"blue\"/></svg>'''","'''<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\"><path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" stroke=\"green\" stroke-width=\"2\" fill=\"none\"/></svg>'''","'''<svg width=\"16\" height=\"32\" viewBox=\"0 0 8 16\"><ellipse cx=\"4\" cy=\"8\" rx=\"3\" ry=\"6\" fill=\"purple\"/></svg>'''","'''<svg width=\"64\" height=\"32\" viewBox=\"0 0 32 16\"><polygon points=\"16,2 30,14 2,14\" fill=\"orange\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create an icon UI declaration from an SVG string source. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can be created programmatically using XML strings.\n            This allows for dynamic icon generation without external files.\n\n            When using `IconDeclaration.ofSvg(String)`, the SVG content is parsed\n            and rendered as a vector icon that scales crisply at any resolution.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"Create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not have the specified size, since they are loaded as having a context dependent size.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"and","text":"The source format should be SVG_STRING.","code":["iconDecl.sourceFormat() == IconDeclaration.SourceFormat.SVG_STRING"]},

        {"kind":"when","text":"Now use the `IconDeclaration.ofSvg` method to create a raw SVG:","code":["iconDecl = IconDeclaration.ofSvg(svg)","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Create a UI declaration with a custom `SvgIcon` from the same source:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"],"svg":["'''<svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/></svg>'''","'''<svg width=\"24\" height=\"24\" viewBox=\"0 0 100 100\"><rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"blue\"/></svg>'''","'''<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\"><path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" stroke=\"green\" stroke-width=\"2\" fill=\"none\"/></svg>'''","'''<svg width=\"16\" height=\"32\" viewBox=\"0 0 8 16\"><ellipse cx=\"4\" cy=\"8\" rx=\"3\" ry=\"6\" fill=\"purple\"/></svg>'''","'''<svg width=\"64\" height=\"32\" viewBox=\"0 0 32 16\"><polygon points=\"16,2 30,14 2,14\" fill=\"orange\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create an icon UI declaration from an SVG string source. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can be created programmatically using XML strings.\n            This allows for dynamic icon generation without external files.\n\n            When using `IconDeclaration.ofSvg(String)`, the SVG content is parsed\n            and rendered as a vector icon that scales crisply at any resolution.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"Create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not have the specified size, since they are loaded as having a context dependent size.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"and","text":"The source format should be SVG_STRING.","code":["iconDecl.sourceFormat() == IconDeclaration.SourceFormat.SVG_STRING"]},

        {"kind":"when","text":"Now use the `IconDeclaration.ofSvg` method to create a raw SVG:","code":["iconDecl = IconDeclaration.ofSvg(svg)","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Create a UI declaration with a custom `SvgIcon` from the same source:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"],"svg":["'''<svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/></svg>'''","'''<svg width=\"24\" height=\"24\" viewBox=\"0 0 100 100\"><rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"blue\"/></svg>'''","'''<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\"><path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" stroke=\"green\" stroke-width=\"2\" fill=\"none\"/></svg>'''","'''<svg width=\"16\" height=\"32\" viewBox=\"0 0 8 16\"><ellipse cx=\"4\" cy=\"8\" rx=\"3\" ry=\"6\" fill=\"purple\"/></svg>'''","'''<svg width=\"64\" height=\"32\" viewBox=\"0 0 32 16\"><polygon points=\"16,2 30,14 2,14\" fill=\"orange\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create an icon UI declaration from an SVG string source. [3]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can be created programmatically using XML strings.\n            This allows for dynamic icon generation without external files.\n\n            When using `IconDeclaration.ofSvg(String)`, the SVG content is parsed\n            and rendered as a vector icon that scales crisply at any resolution.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"Create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not have the specified size, since they are loaded as having a context dependent size.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"and","text":"The source format should be SVG_STRING.","code":["iconDecl.sourceFormat() == IconDeclaration.SourceFormat.SVG_STRING"]},

        {"kind":"when","text":"Now use the `IconDeclaration.ofSvg` method to create a raw SVG:","code":["iconDecl = IconDeclaration.ofSvg(svg)","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Create a UI declaration with a custom `SvgIcon` from the same source:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"],"svg":["'''<svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/></svg>'''","'''<svg width=\"24\" height=\"24\" viewBox=\"0 0 100 100\"><rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"blue\"/></svg>'''","'''<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\"><path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" stroke=\"green\" stroke-width=\"2\" fill=\"none\"/></svg>'''","'''<svg width=\"16\" height=\"32\" viewBox=\"0 0 8 16\"><ellipse cx=\"4\" cy=\"8\" rx=\"3\" ry=\"6\" fill=\"purple\"/></svg>'''","'''<svg width=\"64\" height=\"32\" viewBox=\"0 0 32 16\"><polygon points=\"16,2 30,14 2,14\" fill=\"orange\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"Create an icon UI declaration from an SVG string source. [4]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can be created programmatically using XML strings.\n            This allows for dynamic icon generation without external files.\n\n            When using `IconDeclaration.ofSvg(String)`, the SVG content is parsed\n            and rendered as a vector icon that scales crisply at any resolution.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"Create a UI declaration and extract the component.","code":["var component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should not have the specified size, since they are loaded as having a context dependent size.","code":["component.icon.getIconWidth() == -1","component.icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"and","text":"The source format should be SVG_STRING.","code":["iconDecl.sourceFormat() == IconDeclaration.SourceFormat.SVG_STRING"]},

        {"kind":"when","text":"Now use the `IconDeclaration.ofSvg` method to create a raw SVG:","code":["iconDecl = IconDeclaration.ofSvg(svg)","component = UI.icon(iconDecl).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Create a UI declaration with a custom `SvgIcon` from the same source:","code":["component = UI.icon(SvgIcon.of(iconDecl.source())).get(JIcon)"]},

        {"kind":"then","text":"The icon should have the specified size scaled by UI scale.","code":["component.icon.getIconWidth() == (int) Math.round(width * uiScale)","component.icon.getIconHeight() == (int) Math.round(height * uiScale)"]},

        {"kind":"and","text":"The icon should be an SvgIcon instance.","code":["(component.icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","2.0"],"width":["32","24","48","16","64"],"height":["32","24","48","32","32"],"svg":["'''<svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"red\"/></svg>'''","'''<svg width=\"24\" height=\"24\" viewBox=\"0 0 100 100\"><rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"blue\"/></svg>'''","'''<svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\"><path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" stroke=\"green\" stroke-width=\"2\" fill=\"none\"/></svg>'''","'''<svg width=\"16\" height=\"32\" viewBox=\"0 0 8 16\"><ellipse cx=\"4\" cy=\"8\" rx=\"3\" ry=\"6\" fill=\"purple\"/></svg>'''","'''<svg width=\"64\" height=\"32\" viewBox=\"0 0 32 16\"><polygon points=\"16,2 30,14 2,14\" fill=\"orange\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [0]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [1]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [2]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [3]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [4]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [5]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [6]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    },
  
    {
      "id":"SVG string icon declarations support percentage-based dimensions that do not resolve to pixels. [7]",
      "result":"PASS",
      "duration":"?",
      "iterations":{
      "tags":{},"see":[],"extraInfo":["\n            SVG icons can have percentage-based dimensions (e.g., width=\"100%\", height=\"50%\").\n            When loaded through `IconDeclaration`, these percentages cannot be resolved to pixel values\n            since percentages are always relative to something else. So the dimensions of the icon are -1!\n\n            This is particularly useful for SVG icons designed to be responsive or\n            relative to their container.\n        "]
      },
      "blocks":[
        {"kind":"given","text":"","code":["SwingTree.initialiseUsing(it -> it.uiScaleFactor(uiScale) )"]},

        {"kind":"and","text":"Create an icon declaration from the SVG string.","code":["IconDeclaration iconDecl = IconDeclaration.ofAutoScaledSvg(svg)"]},

        {"kind":"when","text":"We look for the icon:","code":["var iconOpt = UI.findIcon(iconDecl)","var icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no size, since SVGs are designed to scale context dependent.","code":["icon.getIconWidth() == -1","icon.getIconHeight() == -1"]},

        {"kind":"and","text":"The base size is also unknown:","code":["icon.getBaseWidth() == -1","icon.getBaseHeight() == -1"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"We use the `ofSvg` method:","code":["iconDecl = IconDeclaration.ofSvg(svg)"]},

        {"kind":"and","text":"Again find the icon:","code":["iconOpt = UI.findIcon(iconDecl)","icon = iconOpt.get()"]},

        {"kind":"then","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"when","text":"Recreate the `SvgIcon` directly:","code":["icon = SvgIcon.of(svg)"]},

        {"kind":"then","text":"The icon should be present.","code":["iconOpt.isPresent()"]},

        {"kind":"and","text":"The icon should have no pixel-based dimensions (percentage-based is always dynamic).","code":["icon.getIconWidth() == expectedSize.width().map(UI::scale).map(Math::round).orElse(-1)","icon.getIconHeight() == expectedSize.height().map(UI::scale).map(Math::round).orElse(-1)"]},

        {"kind":"and","text":"The base size reflects the percentages:","code":["icon.getBaseWidth() == expectedSize.width().orElse(-1)","icon.getBaseHeight() == expectedSize.height().orElse(-1)"]},

        {"kind":"and","text":"The icon should be an SvgIcon.","code":["(icon instanceof swingtree.style.SvgIcon)"]},

        {"kind":"cleanup","text":"","code":["SwingTree.clear()"]},

        {"kind":"where","text":"","code":{"uiScale":["1.0","1.5","2.0","1.0","1.0","1.5","2.0","1.0"],"expectedSize":["Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(-1,-1)","Size.of(100, 50)","Size.of(75, 150)","Size.of(-1, 50)","Size.of(50, -1)"],"svg":["'''<svg width=\"100%\" height=\"50%\" viewBox=\"1 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75%\" height=\"150%\" viewBox=\"2 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"100%\" height=\"50%\" viewBox=\"3 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50%\" height=\"100%\" viewBox=\"4 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''","'''<svg width=\"100\" height=\"50px\" viewBox=\"5 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"red\"/></svg>'''","'''<svg width=\"75px\" height=\"150\" viewBox=\"6 0 100 100\"><rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" fill=\"green\"/></svg>'''","'''<svg width=\"10%\" height=\"50\" viewBox=\"7 0 200 200\"><path d=\"M40,40 L160,40 L100,160 Z\" fill=\"blue\"/></svg>'''","'''<svg width=\"50px\" height=\"90%\" viewBox=\"8 0 100 50\"><ellipse cx=\"25\" cy=\"25\" rx=\"20\" ry=\"10\" fill=\"yellow\"/></svg>'''"]}}
      ],
      "problems":{"dataValues":[], "errors":[]}
    }
  
  ],
  "generator":"https://github.com/renatoathaydes/spock-reports"
}
